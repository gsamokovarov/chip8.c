struct chip8 {
  unsigned short opcode;
  unsigned char  memory[4096];
  unsigned char  registers[16];
  unsigned short index_register;
  unsigned short program_counter;
  unsigned char  screen[64 * 32];
  unsigned char  delay_timer;
  unsigned char  sound_timer;
  unsigned short stack[16];
  unsigned short stack_pointer;
  unsigned char  keys[16];
};

typedef struct chip8 chip8_t;

unsigned char chip8_hex_font[80] = {
  0xF0, 0x90, 0x90, 0x90, 0xF0,
  0x20, 0x60, 0x20, 0x20, 0xF0,
  0xF0, 0x10, 0xF0, 0x80, 0xF0,
  0xF0, 0x10, 0xF0, 0x10, 0xF0,
  0x90, 0x90, 0xF0, 0x10, 0x10,
  0xF0, 0x80, 0xF0, 0x10, 0xF0,
  0xF0, 0x80, 0xF0, 0x90, 0xF0,
  0xF0, 0x10, 0x20, 0x40, 0x40,
  0xF0, 0x90, 0xF0, 0x90, 0xF0,
  0xF0, 0x90, 0xF0, 0x10, 0x10,
  0xF0, 0x90, 0xF0, 0x90, 0x90,
  0xE0, 0x90, 0xE0, 0x90, 0xE0,
  0xF0, 0x80, 0x80, 0x80, 0xF0,
  0xE0, 0x90, 0x90, 0x90, 0xE0,
  0xF0, 0x80, 0xF0, 0x80, 0xF0,
  0xF0, 0x80, 0xF0, 0x80, 0x80,
};

chip8_t * chip8_new(void);
void chip8_fetch_opcode(chip8_t *);
void chip8_decode_opcode(chip8_t *);
void chip8_next_opcode(chip8_t *);
void chip8_skip_next_opcode(chip8_t *);
void chip8_free(chip8_t *);
